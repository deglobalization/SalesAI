# advisor.html과 SmartSalesTargetingEngine 연동 가이드

## 🎯 개요

이 가이드는 `advisor.html`의 AI 추천 섹션에서 실제 `SmartSalesTargetingEngine`의 결과를 사용하는 방법을 설명합니다.

## 🚀 설정 및 실행

### 1. 의존성 설치

```bash
pip install flask flask-cors
```

### 2. API 서버 시작

#### 방법 1: 직접 실행
```bash
python api_server.py
```

#### 방법 2: 스크립트 사용
```bash
./start_api.sh
```

API 서버가 성공적으로 시작되면 다음과 같은 메시지가 표시됩니다:
```
🚀 스마트 영업 타겟팅 API 서버 시작...
✅ 엔진 초기화 성공
📡 서버 주소: http://localhost:5000
```

### 3. 웹 서버 시작

```bash
python -m http.server 8080
```

### 4. advisor.html 접속

브라우저에서 `http://localhost:8080/advisor.html`에 접속합니다.

## 🤖 사용 방법

### 1. AI 추천 생성

1. advisor.html에서 "💡 AI 추천 생성" 버튼 클릭
2. AI 추천 엔진 선택 다이얼로그에서 **"🎯 SmartSalesTargetingEngine"** 선택
3. 품목 선택 다이얼로그에서 분석할 품목 선택 (예: "아모잘탄")
4. AI가 자동으로 분석하여 결과 표시

### 2. 추천 결과 확인

SmartSalesTargetingEngine 결과는 다음과 같은 정보를 포함합니다:

#### 📊 요약 정보
- **타겟 거래처 수**: 추천된 거래처 개수
- **총 예상 매출**: 모든 타겟의 예상 매출 합계
- **고우선순위 타겟**: 높은 성공 확률을 가진 타겟 수
- **평균 성공 확률**: 전체 타겟의 평균 성공 확률

#### 🏥 거래처별 상세 정보
각 추천 거래처마다 다음 정보가 표시됩니다:

1. **기본 정보**
   - 거래처명
   - 진료과 (내과, 가정의학과 등)
   - 시설유형 (병원, 의원, 약국)
   - 거래처규모 (Large, Medium, Small)
   - 거래처코드

2. **AI 분석 결과**
   - 성공 확률 (%)
   - 예상 매출 (원)
   - 진료과 매칭 점수
   - AI 타겟팅 근거

3. **우선순위 정보**
   - 🚨 높음: 진료과 매칭 우수 + 높은 성공 확률
   - 📋 보통: 적절한 매칭 + 중간 성공 확률
   - 💡 낮음: 기본 추천

## 🔧 API 엔드포인트

### 1. 건강 상태 확인
```
GET http://localhost:5000/api/health
```

### 2. 품목별 추천
```
POST http://localhost:5000/api/recommend
Content-Type: application/json

{
  "product": "아모잘탄",
  "top_n": 20
}
```

### 3. 시장 분석
```
POST http://localhost:5000/api/analyze
Content-Type: application/json

{
  "product": "아모잘탄"
}
```

### 4. 영업 계획
```
POST http://localhost:5000/api/plan
Content-Type: application/json

{
  "product": "아모잘탄",
  "months": 3
}
```

### 5. 품목 목록
```
GET http://localhost:5000/api/products
```

## ⭐ 주요 특징

### 🎯 SmartSalesTargetingEngine의 장점

1. **실제 데이터 기반**: 판매 데이터를 활용한 머신러닝 모델
2. **진료과별 매칭**: 품목의 질환분류와 거래처의 진료과 자동 매칭
3. **정확한 예측**: RandomForest 모델을 통한 높은 정확도
4. **맞춤형 추천**: 거래처 프로필 기반 개인화된 전략

### 📈 기본 추천 엔진과의 차이점

| 구분 | SmartSalesTargetingEngine | 기본 추천 엔진 |
|------|---------------------------|---------------|
| 데이터 소스 | 실제 판매 데이터 | 업로드된 CSV 데이터 |
| 머신러닝 | RandomForest + GradientBoosting | 규칙 기반 알고리즘 |
| 진료과 매칭 | 자동 매칭 | 일반적인 세그먼트 분석 |
| 예상 매출 | 정밀 예측 | 추정치 |
| 성공 확률 | 데이터 기반 계산 | 경험적 추정 |

## 🛠️ 문제 해결

### API 서버 연결 오류
```
API 서버에 연결할 수 없습니다. 서버가 실행 중인지 확인해주세요.
```

**해결 방법:**
1. API 서버가 실행 중인지 확인: `curl http://localhost:5000/api/health`
2. 포트 충돌 확인: `lsof -i :5000`
3. 서버 재시작: `python api_server.py`

### 품목이 없는 경우
```
사용 가능한 품목이 없습니다.
```

**해결 방법:**
1. `rx-rawdata.csv` 파일이 존재하는지 확인
2. 데이터에 품목명 열이 있는지 확인
3. 데이터 형식이 올바른지 확인

### 추천 결과가 없는 경우
```
{품목명}에 대한 추천 결과가 없습니다.
```

**해결 방법:**
1. 품목명 철자 확인
2. 해당 품목의 판매 데이터 존재 여부 확인
3. 다른 품목으로 테스트

## 📋 예시 사용 시나리오

### 시나리오 1: 아모잘탄 타겟팅

1. **목표**: 이상지질혈증 치료제인 아모잘탄의 신규 타겟 발굴
2. **결과**: 내과, 가정의학과 위주의 20개 타겟 추천
3. **활용**: 진료과 매칭 점수가 높은 거래처 우선 방문

### 시나리오 2: 계절성 품목 분석

1. **목표**: 감기약 등 계절성 품목의 최적 타겟팅
2. **결과**: 계절 패턴을 고려한 타겟 추천
3. **활용**: 시기별 맞춤 영업 전략 수립

## 🔮 향후 개선 계획

1. **실시간 분석**: WebSocket을 통한 실시간 추천 업데이트
2. **시각화 강화**: 차트와 그래프를 통한 분석 결과 시각화
3. **자동 리포팅**: 정기적인 타겟팅 리포트 자동 생성
4. **성과 추적**: 추천 결과의 실제 성과 모니터링

## 📞 지원

문제가 발생하거나 추가 기능이 필요한 경우, 이 가이드를 참조하거나 개발팀에 문의하세요.

---

**✨ 이제 advisor.html에서 실제 AI 기반 타겟팅 시스템을 활용할 수 있습니다!** 