# 🎯 SmartSalesTargetingEngine 사용법 가이드

## 📋 개요

SmartSalesTargetingEngine은 AI 기반 스마트 세일즈 타겟팅 시스템으로, 특정 품목을 어떤 거래처에 판매하는 것이 가장 효율적인지 추천하는 도구입니다.

## 🚀 주요 기능

### 1. 거래처-품목 매칭 최적화
- 머신러닝 알고리즘을 사용한 최적 타겟 거래처 추천
- 성공 확률 및 예상 매출 예측

### 2. 시장 기회 분석
- 품목별 시장 침투율 및 성장 가능성 분석
- 경쟁 강도 및 가격 포지셔닝 분석

### 3. 영업 계획 수립
- 3개월 단위 체계적 영업 계획 자동 생성
- 월별 타겟 거래처 및 예상 매출 제시

### 4. 결과 내보내기
- Excel 형태로 상세 분석 결과 저장
- 다양한 시트별 정보 정리

## 📦 필요 패키지

```bash
pip install pandas numpy scikit-learn scipy openpyxl
```

## 🔧 사용 방법

### 1. 기본 사용법

```bash
# 모든 기능 실행 (추천 + 분석 + 계획 + 내보내기)
python run_sales_engine.py --product "품목명" --action all

# 특정 기능만 실행
python run_sales_engine.py --product "품목명" --action recommend
python run_sales_engine.py --product "품목명" --action analyze  
python run_sales_engine.py --product "품목명" --action plan
python run_sales_engine.py --product "품목명" --action export
```

### 2. 옵션 설정

```bash
# 샘플 데이터로 빠른 테스트 (1000건)
python run_sales_engine.py --product "졸피드" --action all --sample 1000

# 추천 거래처 수 조정 (기본값: 10개)
python run_sales_engine.py --product "졸피드" --action recommend --top 20

# 영업 계획 기간 조정 (기본값: 3개월)
python run_sales_engine.py --product "졸피드" --action plan --months 6

# 다른 데이터 파일 사용
python run_sales_engine.py --product "졸피드" --data "다른파일.csv" --action all
```

### 3. 사용 가능한 품목 확인

품목명을 모를 때는 일단 아무 품목이나 입력하면 사용 가능한 품목 목록이 표시됩니다:

```bash
python run_sales_engine.py --product "없는품목" --action recommend --sample 1000
```

## 📊 출력 결과 해석

### 1. 타겟 거래처 추천

```
순위  거래처명                권역        예상매출    성공확률  추천이유
1     연세365소아청소년과의원   경기/인천권역  6,818원    59.1%    최근 활발한 거래
2     이호연비뇨기과의원       경기/인천권역  6,495원    53.5%    최근 활발한 거래
```

- **예상매출**: AI 모델이 예측한 해당 거래처에서의 예상 매출
- **성공확률**: 거래 성사 가능성 (높을수록 좋음)
- **추천이유**: 추천 근거 (성장률, 거래처 규모, 활동성 등)

### 2. 시장 분석

```
품목명: 졸피드
질환분류: 기타
현재 고객수: 13개
전체 고객수: 37개
현재 침투율: 35.1%
목표 침투율: 14.0%
성장 가능 고객수: 0개
예상 추가 매출: 0원
추천 전략: 가격 경쟁력 강화
```

- **침투율**: 전체 거래처 중 해당 품목을 구매하는 비율
- **성장 가능 고객수**: 신규 개발 가능한 거래처 수
- **추천 전략**: AI가 제안하는 마케팅 전략

### 3. 영업 계획

```
품목명: 졸피드
계획기간: 3개월
총 타겟 거래처: 10개
총 예상 매출: 72,386원

월별 실행 계획:
1월: 3개 거래처, 24,163원 (성공확률 53.5%)
2월: 3개 거래처, 22,651원 (성공확률 37.6%)
3월: 3개 거래처, 21,277원 (성공확률 28.3%)
```

## 📁 생성 파일

### Excel 분석 결과 파일 구조

실행 후 `{품목명}_분석결과.xlsx` 파일이 생성되며, 다음 시트들이 포함됩니다:

1. **추천거래처**: 타겟 거래처 목록 및 상세 정보
2. **시장분석**: 시장 기회 및 경쟁 분석 데이터
3. **영업계획_요약**: 영업 계획 개요
4. **월별계획**: 상세 월별 실행 계획

## 🧪 테스트 실행

전체 시스템이 정상 작동하는지 확인하려면:

```bash
# 기본 테스트 실행
python test_sales_engine.py

# 특정 품목으로 실제 테스트
python run_sales_engine.py --product "졸피드" --action all --sample 1000
```

## ⚡ 성능 최적화

### 대용량 데이터 처리

- **샘플링 사용**: `--sample 1000` 옵션으로 빠른 테스트
- **부분 처리**: 특정 action만 실행하여 시간 단축
- **메모리 관리**: 큰 데이터셋은 청크 단위로 처리

### 권장 사용 방법

1. **첫 테스트**: 샘플 데이터로 빠른 검증
```bash
python run_sales_engine.py --product "졸피드" --action recommend --sample 1000
```

2. **전체 분석**: 만족스러우면 전체 데이터로 완전 분석
```bash
python run_sales_engine.py --product "졸피드" --action all
```

## 🛠️ 문제 해결

### 일반적인 오류

1. **품목을 찾을 수 없음**: 정확한 품목명 확인 필요
2. **메모리 부족**: `--sample` 옵션으로 데이터 크기 축소
3. **파일 없음**: `rx-rawdata.csv` 파일이 같은 폴더에 있는지 확인

### 로그 확인

상세한 실행 과정이 콘솔에 출력되므로, 오류 발생 시 로그를 확인하여 문제점을 파악할 수 있습니다.

## 📈 활용 팁

### 1. 정기적 분석
- 월단위로 새로운 데이터로 분석 재실행
- 트렌드 변화 모니터링

### 2. 다양한 품목 비교
- 여러 품목의 분석 결과를 비교하여 우선순위 결정
- 포트폴리오 최적화

### 3. 결과 활용
- Excel 파일을 영업팀과 공유
- 월별 계획을 실제 영업 활동에 반영

---

📞 **문의사항이 있으시면 언제든 연락주세요!** 