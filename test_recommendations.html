<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartAI ì¶”ì²œ í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #1f2937;
            color: #e5e7eb;
        }
        .test-container {
            background: #374151;
            padding: 30px;
            border-radius: 15px;
            border: 2px solid #10b981;
        }
        .test-button {
            background: #10b981;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
        }
        .test-button:hover {
            background: #059669;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            background: #1f2937;
            border-radius: 10px;
            border-left: 4px solid #10b981;
        }
        .error {
            border-left-color: #ef4444;
        }
        .loading {
            border-left-color: #f59e0b;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ§ª SmartAI ì¶”ì²œ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸</h1>
        <p>ë‹´ë‹¹ìë³„ ê³ í’ˆì§ˆ ì¶”ì²œ ë°ì´í„°ê°€ ì œëŒ€ë¡œ ë¡œë“œë˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.</p>
        
        <button class="test-button" onclick="testDataLoad()">1. ë°ì´í„° ë¡œë“œ í…ŒìŠ¤íŠ¸</button>
        <button class="test-button" onclick="testRecommendation()">2. ê¹€ì„œì—° ë‹´ë‹¹ì ì˜¤ì˜íƒ„ ì¶”ì²œ í…ŒìŠ¤íŠ¸</button>
        <button class="test-button" onclick="testFullIntegration()">3. ì „ì²´ í†µí•© í…ŒìŠ¤íŠ¸</button>
        
        <div id="result" class="result" style="display: none;">
            <h3>í…ŒìŠ¤íŠ¸ ê²°ê³¼</h3>
            <pre id="resultContent"></pre>
        </div>
    </div>

    <script src="manager_recommendation_integration.js"></script>
    <script>
        // ì „ì—­ ë³€ìˆ˜ ì„¤ì • (advisor.htmlê³¼ ë™ì¼í•œ í™˜ê²½ ì‹œë®¬ë ˆì´ì…˜)
        window.currentManager = 'ê¹€ì„œì—°';
        window.analysisResults = {};
        
        // ë¡œë”©/ìƒíƒœ í‘œì‹œ í•¨ìˆ˜ë“¤ (advisor.html í•¨ìˆ˜ ì‹œë®¬ë ˆì´ì…˜)
        function showStatus(message, type) {
            console.log(`[${type.toUpperCase()}] ${message}`);
            updateResult(`ìƒíƒœ: ${message}`, type);
        }
        
        function showLoading(show) {
            console.log(`ë¡œë”©: ${show ? 'ì‹œì‘' : 'ì™„ë£Œ'}`);
        }
        
        function updateProgress(percent) {
            console.log(`ì§„í–‰ë¥ : ${percent}%`);
        }
        
        function autoSwitchTab(tab) {
            console.log(`íƒ­ ì „í™˜: ${tab}`);
        }
        
        function updateResult(content, type = 'info') {
            const resultDiv = document.getElementById('result');
            const resultContent = document.getElementById('resultContent');
            
            resultDiv.style.display = 'block';
            resultDiv.className = `result ${type}`;
            resultContent.textContent = content;
        }
        
        async function testDataLoad() {
            updateResult('ë°ì´í„° ë¡œë“œ í…ŒìŠ¤íŠ¸ ì¤‘...', 'loading');
            
            try {
                const data = await loadManagerRecommendationsData();
                if (data && data.manager_data) {
                    const managers = Object.keys(data.manager_data);
                    const totalRecs = Object.values(data.manager_data)
                        .reduce((sum, mgr) => sum + mgr.manager_info.recommendations_count, 0);
                    
                    updateResult(`âœ… ë°ì´í„° ë¡œë“œ ì„±ê³µ!
ë‹´ë‹¹ì: ${managers.length}ëª… (${managers.join(', ')})
ì´ ì¶”ì²œ ê±´ìˆ˜: ${totalRecs.toLocaleString()}ê°œ
ì—”ì§„ ë²„ì „: ${data.engine_version}`, 'info');
                } else {
                    updateResult('âŒ ë°ì´í„°ê°€ ë¹„ì–´ìˆê±°ë‚˜ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.', 'error');
                }
            } catch (error) {
                updateResult(`âŒ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }
        
        async function testRecommendation() {
            updateResult('ê¹€ì„œì—° ë‹´ë‹¹ì ì˜¤ì˜íƒ„ ì¶”ì²œ í…ŒìŠ¤íŠ¸ ì¤‘...', 'loading');
            
            try {
                const recs = await findManagerRecommendationsForProduct('ì˜¤ì˜íƒ„', 'ê¹€ì„œì—°');
                
                if (recs && recs.length > 0) {
                    const sample = recs[0];
                    updateResult(`âœ… ì¶”ì²œ ë°ì´í„° ê²€ìƒ‰ ì„±ê³µ!
í’ˆëª©: ì˜¤ì˜íƒ„
ë‹´ë‹¹ì: ê¹€ì„œì—°
ì¶”ì²œ ê±´ìˆ˜: ${recs.length}ê°œ

ì²« ë²ˆì§¸ ì¶”ì²œ:
- ê±°ë˜ì²˜: ${sample.ê±°ë˜ì²˜ëª…}
- ì„±ê³µí™•ë¥ : ${sample.ì„±ê³µí™•ë¥ }%
- ì˜ˆìƒë§¤ì¶œ: ${sample.ì˜ˆìƒë§¤ì¶œ?.toLocaleString()}ì›
- ì§„ë£Œê³¼: ${sample.ì§„ë£Œê³¼}
- ì¶”ì²œì´ìœ : ${sample.ì¶”ì²œì´ìœ }`, 'info');
                } else {
                    updateResult('âŒ í•´ë‹¹ í’ˆëª©ì˜ ì¶”ì²œ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.', 'error');
                }
            } catch (error) {
                updateResult(`âŒ ì¶”ì²œ ê²€ìƒ‰ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }
        
        async function testFullIntegration() {
            updateResult('ì „ì²´ í†µí•© í…ŒìŠ¤íŠ¸ ì¤‘...', 'loading');
            
            try {
                // advisor.htmlê³¼ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì „ì²´ í•¨ìˆ˜ í˜¸ì¶œ
                await generateSmartAIRecommendationsWithManager('ì˜¤ì˜íƒ„');
                
                // ê²°ê³¼ í™•ì¸
                if (window.analysisResults && window.analysisResults.aiRecommendations) {
                    const recs = window.analysisResults.aiRecommendations;
                    const avgConfidence = recs.length > 0 
                        ? Math.round(recs.reduce((sum, r) => sum + (r.confidence || 0), 0) / recs.length) 
                        : 0;
                    const totalSales = recs.reduce((sum, r) => 
                        sum + (r.strategies?.[0]?.expectedSales || 0), 0);
                    
                    updateResult(`ğŸ‰ ì „ì²´ í†µí•© í…ŒìŠ¤íŠ¸ ì„±ê³µ!
í’ˆëª©: ì˜¤ì˜íƒ„
ë‹´ë‹¹ì: ê¹€ì„œì—°
ë³€í™˜ëœ ì¶”ì²œ: ${recs.length}ê°œ
í‰ê·  ì‹ ë¢°ë„: ${avgConfidence}%
ì´ ì˜ˆìƒë§¤ì¶œ: ${totalSales.toLocaleString()}ë§Œì›

ì²« ë²ˆì§¸ ì¶”ì²œ ë³€í™˜ ê²°ê³¼:
- ê±°ë˜ì²˜: ${recs[0]?.customer?.accountName}
- ì‹ ë¢°ë„: ${recs[0]?.confidence}%
- ì§„ë£Œê³¼: ${recs[0]?.customer?.specialty}
- ë¶„ì„: ${recs[0]?.analysis}
- ì˜ˆìƒë§¤ì¶œ: ${recs[0]?.strategies?.[0]?.expectedSales}ë§Œì›`, 'info');
                } else {
                    updateResult('âŒ analysisResults.aiRecommendationsì´ ìƒì„±ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.', 'error');
                }
            } catch (error) {
                updateResult(`âŒ í†µí•© í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }
    </script>
</body>
</html> 